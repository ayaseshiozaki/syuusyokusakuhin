<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>マイページ - PhotoFeed</title>

  <!-- ===== PWA ===== -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ff8c42">

  <!-- ===== CSS ===== -->
  <link rel="stylesheet" href="css/mypage.css">
  <link rel="stylesheet" href="css/micro.css">
</head>
<body class="mypage-page">

  <!-- モーダル（AI判定などに使用） -->
  <div id="modal-overlay" class="modal-overlay hidden">
    <div class="modal-content">
      <span id="modal-close" class="modal-close">&times;</span>
      <div id="modal-body">
        <!-- モーダル内に動的コンテンツを挿入 -->
      </div>
    </div>
  </div>

  <!-- 設定ボタン -->
  <a id="settingsBtn" class="icon-btn" href="./settings.html" aria-label="設定">⚙</a>

  <div class="mypage-container">

    <!-- プロフィール欄 -->
    <div class="mypage-profile">
      <img id="mypage-profileImage" class="mypage-profile-img" src="image/gazou1.jpg" alt="プロフィール画像">
      
      <div class="username-edit-container">
        <span id="mypage-userName" class="mypage-username"></span>
        <button id="editNameBtn">名前を変更</button>
        <div id="editNameBox" class="editNameBox hidden">
          <input id="nameInput" type="text" placeholder="新しい名前">
          <button id="saveNameBtn">保存</button>
        </div>
      </div>

      <!-- 自己紹介 -->
      <div class="intro-edit-container">
        <p id="mypage-intro" class="mypage-intro">自己紹介なし</p>
        <button id="editIntroBtn">編集</button>
        <div id="editIntroBox" class="editIntroBox hidden">
          <textarea id="introInput" placeholder="自己紹介を入力"></textarea>
          <button id="saveIntroBtn">保存</button>
        </div>
      </div>

      <!-- フォロー/フォロワー -->
      <div class="mypage-stats">
        <div class="mypage-stat">
          <span id="mypage-followerCount">0</span><br>フォロワー
        </div>
        <div class="mypage-stat">
          <span id="mypage-followingCount">0</span><br>フォロー
        </div>
      </div>

      <!-- プロフィール画像変更用ファイル入力 -->
      <input type="file" id="mypage-imageInput" accept="image/*" style="display:none;">
    </div>

    <hr class="mypage-line">

    <!-- ★★★ あなたへのおすすめ（追加） ★★★ -->
    <h3 class="mypage-recommend-title">AI分析・おすすめアイテム</h3>

    <button id="loadRecommendBtn" class="recommend-btn">
      AI分析を取得
    </button>

    <div id="recommendList" class="mypage-recommend-list">
      <p>分析結果はありません</p>
    </div>

    <hr class="mypage-line">

    <!-- 投稿一覧 -->
    <h3 class="mypage-post-title">あなたの投稿</h3>
    <div id="mypage-postList" class="mypage-post-list">
      <!-- 投稿カードはJSで生成されます -->
    </div>

    <hr class="mypage-line">

    <!-- お気に入り一覧 -->
    <h3 class="mypage-favorite-title">
      <button id="toggleFavoritesBtn">お気に入りを見る</button>
    </h3>
    <div id="mypage-favoriteList" class="mypage-favorite-list" style="display:none;">
      <!-- お気に入り投稿カードはJSで生成 -->
    </div>

  </div>

  <!-- 下部タブバー -->
  <footer class="tabBar">
    <div class="tabBar-inner">
      <a href="index.html" class="tabItem">🏠</a>
      <a href="kensaku.html" class="tabItem">🔍</a>
      <a href="toukou.html" class="tabItem">➕</a>
      <a href="mypage.html" class="tabItem active">👤</a>
      <a href="notifications.html" class="tabItem">🔔
        <span id="notifBadge" class="tabBadge hidden"></span>
      </a>
    </div>
  </footer>

  <!-- フォロワー / フォロー一覧モーダル -->
  <div id="followModal" class="follow-modal hidden">
    <div class="follow-modal-content">
      <h3 id="followModalTitle"></h3>
      <div id="followUserList"></div>
      <button id="closeFollowModal">閉じる</button>
    </div>
  </div>

  <!-- 画像拡大用モーダル -->
  <div id="imageModal" class="image-modal hidden">
    <span class="image-modal-close" id="imageModalClose">&times;</span>
    <img id="imageModalImg" class="image-modal-img" src="">
  </div>

  <!-- Script -->
  <script type="module" src="Script/mypageScript.js"></script>
  <script type="module" src="Script/unreadBadge.js"></script>

</body>
</html>
